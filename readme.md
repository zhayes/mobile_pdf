# mobile-pdf

<div align="center">

[![License](https://img.shields.io/npm/l/mobile-pdf.svg)](https://github.com/zhayes/mobile_pdf/blob/main/LICENSE)
[![NPM Downloads](https://img.shields.io/npm/dm/mobile-pdf.svg)](https://www.npmjs.com/package/mobile-pdf)

A high-performance, mobile-first PDF viewer with rich gesture support that works seamlessly on desktop too.

**Language:** [English](#english) | [‰∏≠Êñá](#‰∏≠Êñá)

</div>

---

## <a name="english"></a>English

### üìñ About The Project

`mobile-pdf` is a JavaScript library engineered for an optimal PDF viewing experience across all devices. It leverages the power of `pdfjs-dist` for robust PDF rendering and implements a highly efficient lazy-loading mechanism using `IntersectionObserver` to ensure that even large documents load quickly and consume minimal memory.

The library intelligently detects device capabilities. On touch-enabled devices, it provides a rich gesture-driven interface (pinch-to-zoom, drag-to-pan). On non-touch devices, it automatically enables native scrollbar-based navigation, providing a seamless experience out of the box.

### ‚ú® Features

-   **üìÑ High-Performance Rendering**: Efficiently renders pages on demand, keeping the UI responsive and memory usage low.
-   **üëÜ Smart Interaction Mode**: Automatically enables touch gestures on mobile and standard scrollbar navigation on desktops.
-   **ü§è Rich Gesture Support**: Provides smooth, intuitive touch gestures including pinch-to-zoom, drag-to-pan, and double-tap zoom.
-   **üõ†Ô∏è Modular & Extensible API**: A clean, decoupled architecture allows for easy customization and integration.
-   **üé® Customizable UI**: Easily style the viewer components by providing your own CSS classes.
-   **‚öôÔ∏è Lifecycle Hooks**: Execute custom logic at key stages of the PDF loading and rendering process.
-   **‚úÖ Zero-Config Styling**: CSS styles are bundled directly into the JavaScript, so no separate style import is needed.

### üì¶ Installation

```bash
# Using pnpm (recommended)
pnpm add mobile-pdf

# Using npm
npm install mobile-pdf

# Using yarn
yarn add mobile-pdf
```

### üöÄ Quick Start

#### 1. Prepare the HTML

First, you need a container element in your HTML to host the PDF viewer. This element should have a defined size.

```html
<!-- The viewer will be mounted here. Ensure it has a height. -->
<div id="pdf-viewer" style="width: 100vw; height: 100vh;"></div>

<!-- Example: An input for users to select a local PDF file -->
<input type="file" id="file-input" accept=".pdf" />
```

#### 2. Initialize the Viewer

The library's functionality is split across four core classes. Here‚Äôs how you initialize and connect them:

```javascript
import { PDFViewer, MobilePDF, Transform, TouchManager } from 'mobile-pdf';

// Step 1: Create the viewer's DOM structure
const root_element = document.getElementById('pdf-viewer');
const pdf_viewer = new PDFViewer(root_element);

// Step 2: Set up gesture handling
const transform = new Transform(pdf_viewer.inner_div, pdf_viewer.wrap_div);
const touch_manager = new TouchManager(transform);

// Step 3: Create the PDF rendering engine
const mobile_pdf = new MobilePDF(pdf_viewer.wrap_div, pdf_viewer.inner_div, {
  resolution_multiplier: 3, // Higher value for sharper rendering
  hook_actions: {
    start_loading: async () => console.log('Loading started...'),
    begin_insert_pages: (total_pages) => {
      transform.reset_transform(); // Reset zoom/pan for new document
      console.log(`PDF parsed, ${total_pages} pages to be inserted.`);
    },
    complete_loading: async () => console.log('PDF document is fully loaded.'),
    end_rendering: (page) => console.log(`Page ${page.page} has rendered.`),
  },
});

// Step 4: Load a PDF
const file_input = document.getElementById('file-input');
file_input.addEventListener('change', async (event) => {
  const file = event.target.files[0];
  if (file) {
    const file_buffer = await file.arrayBuffer();
    await mobile_pdf.load_pdf(file_buffer);
  }
});

// For Single Page Applications (SPAs) like React, Vue, etc.
// It is crucial to clean up event listeners when the component unmounts.
//
// Example for a React component:
// useEffect(() => {
//   // ... initialization code from above ...
//   return () => {
//     touch_manager.removeEventListener(); // Cleanup on unmount
//   };
// }, []);
```

### üìö API Reference

#### Architecture

1.  **`PDFViewer`**: Builds the necessary DOM elements and automatically configures the container for touch or scroll interaction.
2.  **`MobilePDF`**: Manages PDF loading and page rendering.
3.  **`Transform`**: Controls CSS `transform` properties (scale and translate).
4.  **`TouchManager`**: Captures user touch gestures and executes them via a `Transform` instance.

---

#### `new PDFViewer(rootEl: HTMLElement)`

Initializes the viewer's DOM structure. It intelligently detects if the device supports touch events.
-   On **touch devices**, the main container (`wrap_div`) will have `overflow: hidden` to allow for gesture-based panning.
-   On **non-touch devices** (like desktops), it will have `overflow: auto` to enable native scrollbars.

-   **`rootEl`**: The HTML element where the viewer will be mounted.
-   **Instance Properties**:
    -   `wrap_div: HTMLDivElement`: The outer container element (viewport).
    -   `inner_div: HTMLDivElement`: The inner content container that holds PDF pages and is the target for transformations.

---

#### `new MobilePDF(wrapper_dom, inner_dom, config?)`

The core class that handles the PDF rendering lifecycle.

-   **`wrapper_dom`**: The outer container element (`PDFViewer.wrap_div`).
-   **`inner_dom`**: The content container element (`PDFViewer.inner_div`).
-   **`config`**: An optional configuration object (`MobilePDFViewerConfig`).

##### Methods
-   **`load_pdf(source: PDFSourceDataOption): Promise<void>`**: Asynchronously loads a PDF document.
    -   `source`: Can be a URL (`string`), `ArrayBuffer`, `Uint8Array`, or other formats supported by `pdfjs-dist`.

##### Configuration (`MobilePDFViewerConfig`)

| Key | Type | Default | Description |
| :--- | :--- | :--- | :--- |
| `resolution_multiplier`| `number` | `3` | The multiplier for canvas rendering resolution. Higher values produce sharper images but use more memory. |
| `pdf_container_class` | `string[]` | `[]` | Custom CSS classes for the main wrapper (`wrap_div`). |
| `transform_container_class`| `string[]` | `[]` | Custom CSS classes for the content container (`inner_div`). |
| `page_container_class` | `string[]` | `[]` | Custom CSS classes for the wrapper of each page. |
| `canvas_class` | `string[]` | `[]` | Custom CSS classes for each `<canvas>` element. |
| `hook_actions` | `HookActions`| `{}` | An object containing lifecycle callback functions. |

##### Lifecycle Hooks (`hook_actions`)

| Hook | Parameters | Description |
| :--- | :--- | :--- |
| `start_loading` | `() => Promise<void>` | **Async**. Fires when `load_pdf` is called. Ideal for showing a loading indicator. |
| `begin_insert_pages`| `(total_pages: number) => void`| Fires after the PDF is parsed. Recommended place to reset transforms. |
| `complete_loading`| `(pages, pdf_doc, total) => Promise<void>` | **Async**. Fires after all page placeholders are in the DOM. |
| `start_rendering` | `(page: PDFPage) => void` | Fires just before a specific page begins to render. |
| `end_rendering` | `(page: PDFPage) => void` | Fires after a specific page has finished rendering. |

---

#### `new Transform(transform_el, wrapper_el, boundary?)`

Manages the 2D transformations (zoom and pan) for the content element.

-   **`transform_el`**: The element to which CSS transforms will be applied (`PDFViewer.inner_div`).
-   **`wrapper_el`**: The outer boundary-defining element (`PDFViewer.wrap_div`).
-   **`boundary`**: Optional object to configure movement boundaries and scale limits.

##### Boundary Configuration
The `boundary` object sets limits for panning and zooming.

| Key | Type | Default | Description |
| :--- | :--- | :--- | :--- |
| `left` | `number` | `50` | Maximum allowable pan distance from the left edge (in pixels). |
| `right` | `number` | `50` | Maximum allowable pan distance from the right edge (in pixels). |
| `top` | `number` | `50` | Maximum allowable pan distance from the top edge (in pixels). |
| `bottom` | `number` | `50` | Maximum allowable pan distance from the bottom edge (in pixels). |
| `min_scale` | `number` | `0.5` | The minimum allowed zoom-out scale. |
| `max_scale` | `number` | `4` | The maximum allowed zoom-in scale. |
**Note:** The `left`, `right`, `top`, and `bottom` boundary constraints only take effect when the content is zoomed in (`scale > 1`).

##### Methods
-   **`set_dragging(value: boolean)`**: Sets the internal dragging state.
-   **`set_pinching(value: boolean)`**: Sets the internal pinching state.
-   **`get_dragging(): boolean`**: Returns `true` if a drag operation is active.
-   **`get_pinching(): boolean`**: Returns `true` if a pinch operation is active.
-   **`get_translate(): { translate_x: number, translate_y: number }`**: Returns the current translation values.
-   **`get_scale(): number`**: Returns the current scale value.
-   **`transform(position?)`**: Applies a transformation. `position` is an object with optional `translate_x`, `translate_y`, and `scale` properties.
-   **`reset_transform()`**: Resets scale to `1` and translation to `(0, 0)`.
-   **`constrain_boundary(x, y)`**: Calculates and returns new coordinates constrained within the defined boundaries.

---

#### `new TouchManager(transform_instance)`

Listens for user touch events and orchestrates gestures. The constructor automatically detects touch support. If touch is available, it calls `addEventListener()` to begin listening for events.

-   **`transform_instance`**: An instance of the `Transform` class that this manager will control.

##### Methods
-   **`addEventListener()`**: Attaches `touchstart`, `touchmove`, and `touchend` event listeners to the transform element. It is called by the constructor automatically on touch-enabled devices.
-   **`removeEventListener()`**: Removes all event listeners. **This is crucial for cleanup in Single Page Applications** to prevent memory leaks when a component unmounts.

### üôè Contributing

Contributions, issues, and feature requests are welcome! Feel free to check the [issues page](https://github.com/zhayes/mobile_pdf/issues).

### üìÑ License

This project is licensed under the MIT License.

---

## <a name="‰∏≠Êñá"></a>‰∏≠Êñá

### üìñ ÂÖ≥‰∫éÈ°πÁõÆ

`mobile-pdf` ÊòØ‰∏Ä‰∏™‰∏∫Âú®ÊâÄÊúâËÆæÂ§á‰∏äÊèê‰æõÂçìË∂ä PDF ÈòÖËØª‰ΩìÈ™åËÄåËÆæËÆ°ÁöÑ JavaScript Â∫ì„ÄÇÂÆÉÂà©Áî®‰∫Ü `pdfjs-dist` Âº∫Â§ßÁöÑ PDF Ê∏≤ÊüìËÉΩÂäõÔºåÂπ∂Âü∫‰∫é `IntersectionObserver` ÂÆûÁé∞‰∫Ü‰∏ÄÂ•óÈ´òÊïàÁöÑÊáíÂä†ËΩΩÊú∫Âà∂ÔºåÁ°Æ‰øù‰∫ÜÂç≥‰æøÊòØÂ§ßÂûãÊñáÊ°£‰πüËÉΩÂø´ÈÄüÂä†ËΩΩÂπ∂‰ªÖÊ∂àËÄóÊúÄÂ∞ëÁöÑÂÜÖÂ≠ò„ÄÇ

ËØ•Â∫ìËÉΩÊô∫ËÉΩÊ£ÄÊµãËÆæÂ§áËÉΩÂäõ„ÄÇÂú®ÊîØÊåÅËß¶Êë∏ÁöÑËÆæÂ§á‰∏äÔºåÂÆÉÊèê‰æõÁî±‰∏∞ÂØåÊâãÂäøÈ©±Âä®ÁöÑ‰∫§‰∫íÁïåÈù¢ÔºàÂèåÊåáÁº©Êîæ„ÄÅÊãñÊãΩÂπ≥ÁßªÔºâÔºõÂú®ÈùûËß¶Êë∏ËÆæÂ§á‰∏äÔºåÂÆÉ‰ºöËá™Âä®ÂêØÁî®Âü∫‰∫éÂéüÁîüÊªöÂä®Êù°ÁöÑÂØºËà™ÔºåÂºÄÁÆ±Âç≥ÂèØÊèê‰æõÊó†ÁºùÁöÑ‰ΩìÈ™å„ÄÇ

### ‚ú® ÂäüËÉΩÁâπÊÄß

-   **üìÑ È´òÊÄßËÉΩÊ∏≤Êüì**: ÊåâÈúÄÈ´òÊïàÊ∏≤ÊüìÈ°µÈù¢Ôºå‰øùÊåÅ UI ÁöÑÂìçÂ∫îÈÄüÂ∫¶ÂíåËæÉ‰ΩéÁöÑÂÜÖÂ≠òÂç†Áî®„ÄÇ
-   **üëÜ Êô∫ËÉΩ‰∫§‰∫íÊ®°Âºè**: Âú®ÁßªÂä®ËÆæÂ§á‰∏äËá™Âä®ÂêØÁî®Ëß¶Êë∏ÊâãÂäøÔºåÂú®Ê°åÈù¢‰∏äËá™Âä®ÂêØÁî®Ê†áÂáÜÊªöÂä®Êù°ÂØºËà™„ÄÇ
-   **ü§è ‰∏∞ÂØåÁöÑÊâãÂäøÊîØÊåÅ**: Êèê‰æõÊµÅÁïÖ„ÄÅÁõ¥ËßÇÁöÑËß¶Êë∏ÊâãÂäøÔºåÂåÖÊã¨ÂèåÊåáÁº©Êîæ„ÄÅÊãñÊãΩÂπ≥ÁßªÂíåÂèåÂáªÁº©Êîæ„ÄÇ
-   **üõ†Ô∏è Ê®°ÂùóÂåñ‰∏éÂèØÊâ©Â±ï API**: ÁÆÄÊ¥Å„ÄÅËß£ËÄ¶ÁöÑÊû∂ÊûÑ‰ΩøÂæóËá™ÂÆö‰πâÂíåÈõÜÊàêÂèòÂæóËΩªËÄåÊòì‰∏æ„ÄÇ
-   **üé® ÂèØËá™ÂÆö‰πâ UI**: ÈÄöËøáÊèê‰æõËá™ÂÆö‰πâ CSS Á±ªÂêçÔºåËΩªÊùæ‰∏∫ÈòÖËØªÂô®ÁªÑ‰ª∂Ê∑ªÂä†Ê†∑Âºè„ÄÇ
-   **‚öôÔ∏è ÁîüÂëΩÂë®ÊúüÈí©Â≠ê**: Âú® PDF Âä†ËΩΩÂíåÊ∏≤ÊüìËøáÁ®ãÁöÑÂÖ≥ÈîÆÈò∂ÊÆµÊâßË°åËá™ÂÆö‰πâÈÄªËæë„ÄÇ
-   **‚úÖ Èõ∂ÈÖçÁΩÆÊ†∑Âºè**: CSS Ê†∑ÂºèÂ∑≤Áõ¥Êé•ÊâìÂåÖÂà∞ JavaScript ‰∏≠ÔºåÊó†ÈúÄÂçïÁã¨ÂºïÂÖ•Ê†∑ÂºèÊñá‰ª∂„ÄÇ

### üì¶ ÂÆâË£Ö

```bash
# ‰ΩøÁî® pnpm (Êé®Ëçê)
pnpm add mobile-pdf

# ‰ΩøÁî® npm
npm install mobile-pdf

# ‰ΩøÁî® yarn
yarn add mobile-pdf
```

### üöÄ Âø´ÈÄü‰∏äÊâã

#### 1. ÂáÜÂ§á HTML ÁªìÊûÑ

È¶ñÂÖàÔºåÊÇ®ÈúÄË¶ÅÂú® HTML ‰∏≠ÂáÜÂ§á‰∏Ä‰∏™ÂÆπÂô®ÂÖÉÁ¥†Êù•ÊâøËΩΩ PDF ÈòÖËØªÂô®„ÄÇËØ•ÂÖÉÁ¥†Â∫îÂÖ∑ÊúâÁ°ÆÂÆöÁöÑÂ∞∫ÂØ∏„ÄÇ

```html
<!-- ÈòÖËØªÂô®Â∞ÜÂú®Ê≠§Â§ÑÊåÇËΩΩ„ÄÇËØ∑Á°Æ‰øùÂÆÉÂÖ∑ÊúâÈ´òÂ∫¶„ÄÇ -->
<div id="pdf-viewer" style="width: 100vw; height: 100vh;"></div>

<!-- Á§∫‰æãÔºö‰∏Ä‰∏™‰æõÁî®Êà∑ÈÄâÊã©Êú¨Âú∞ PDF Êñá‰ª∂ÁöÑËæìÂÖ•Ê°Ü -->
<input type="file" id="file-input" accept=".pdf" />
```

#### 2. ÂàùÂßãÂåñÈòÖËØªÂô®

ËØ•Â∫ìÁöÑÂäüËÉΩÂàÜÊï£Âú®Âõõ‰∏™Ê†∏ÂøÉÁ±ª‰∏≠„ÄÇ‰ª•‰∏ãÊòØÂ¶Ç‰ΩïÂàùÂßãÂåñÂπ∂ËøûÊé•ÂÆÉ‰ª¨Ôºö

```javascript
import { PDFViewer, MobilePDF, Transform, TouchManager } from 'mobile-pdf';

// Ê≠•È™§ 1: ÂàõÂª∫ÈòÖËØªÂô®ÁöÑ DOM ÁªìÊûÑ
const root_element = document.getElementById('pdf-viewer');
const pdf_viewer = new PDFViewer(root_element);

// Ê≠•È™§ 2: ËÆæÁΩÆÊâãÂäøÂ§ÑÁêÜ
const transform = new Transform(pdf_viewer.inner_div, pdf_viewer.wrap_div);
const touch_manager = new TouchManager(transform);

// Ê≠•È™§ 3: ÂàõÂª∫ PDF Ê∏≤ÊüìÂºïÊìé
const mobile_pdf = new MobilePDF(pdf_viewer.wrap_div, pdf_viewer.inner_div, {
  resolution_multiplier: 3, // Êõ¥È´òÁöÑÂÄºÂèØ‰ª•Ëé∑ÂæóÊõ¥Ê∏ÖÊô∞ÁöÑÊ∏≤ÊüìÊïàÊûú
  hook_actions: {
    start_loading: async () => console.log('Âä†ËΩΩÂºÄÂßã...'),
    begin_insert_pages: (total_pages) => {
      transform.reset_transform(); // ‰∏∫Êñ∞ÊñáÊ°£ÈáçÁΩÆÁº©ÊîæÂíåÂπ≥Áßª
      console.log(`PDF Ëß£ÊûêÂÆåÊàêÔºåÊÄªËÆ° ${total_pages} È°µÂæÖÊèíÂÖ•„ÄÇ`);
    },
    complete_loading: async () => console.log('PDF ÊñáÊ°£Â∑≤ÂÆåÂÖ®Âä†ËΩΩ„ÄÇ'),
    end_rendering: (page) => console.log(`Á¨¨ ${page.page} È°µÂ∑≤Ê∏≤Êüì„ÄÇ`),
  },
});

// Ê≠•È™§ 4: Âä†ËΩΩ‰∏Ä‰∏™ PDF
const file_input = document.getElementById('file-input');
file_input.addEventListener('change', async (event) => {
  const file = event.target.files[0];
  if (file) {
    const file_buffer = await file.arrayBuffer();
    await mobile_pdf.load_pdf(file_buffer);
  }
});

// ÂØπ‰∫éÂçïÈ°µÂ∫îÁî® (SPA) Â¶Ç React, Vue Á≠â
// Âú®ÁªÑ‰ª∂Âç∏ËΩΩÊó∂Ê∏ÖÁêÜ‰∫ã‰ª∂ÁõëÂê¨Âô®Ëá≥ÂÖ≥ÈáçË¶Å„ÄÇ
//
// React ÁªÑ‰ª∂Á§∫‰æã:
// useEffect(() => {
//   // ... ‰ª•‰∏äÂàùÂßãÂåñ‰ª£Á†Å ...
//   return () => {
//     touch_manager.removeEventListener(); // Âú®Âç∏ËΩΩÊó∂Ê∏ÖÁêÜ
//   };
// }, []);
```

### üìö API ÂèÇËÄÉ

#### Êû∂ÊûÑ

1.  **`PDFViewer`**: ÊûÑÂª∫ÊâÄÈúÄÁöÑ DOM ÂÖÉÁ¥†ÔºåÂπ∂‰∏∫Ëß¶Êë∏ÊàñÊªöÂä®‰∫§‰∫íËá™Âä®ÈÖçÁΩÆÂÆπÂô®„ÄÇ
2.  **`MobilePDF`**: ÁÆ°ÁêÜ PDF ÁöÑÂä†ËΩΩÂíåÈ°µÈù¢Ê∏≤Êüì„ÄÇ
3.  **`Transform`**: ÊéßÂà∂ CSS `transform` Â±ûÊÄßÔºàÁº©ÊîæÂíåÂπ≥ÁßªÔºâ„ÄÇ
4.  **`TouchManager`**: ÊçïËé∑Áî®Êà∑Ëß¶Êë∏ÊâãÂäøÔºåÂπ∂ÈÄöËøá `Transform` ÂÆû‰æãÊù•ÊâßË°åÊìç‰Ωú„ÄÇ

---

#### `new PDFViewer(rootEl: HTMLElement)`

ÂàùÂßãÂåñÈòÖËØªÂô®ÁöÑ DOM ÁªìÊûÑ„ÄÇÂÆÉËÉΩÊô∫ËÉΩÊ£ÄÊµãËÆæÂ§áÊòØÂê¶ÊîØÊåÅËß¶Êë∏‰∫ã‰ª∂„ÄÇ
-   Âú®**Ëß¶Êë∏ËÆæÂ§á**‰∏äÔºå‰∏ªÂÆπÂô® (`wrap_div`) Â∞ÜËÆæÁΩÆ `overflow: hidden` ‰ª•‰æøËøõË°åÊâãÂäøÂπ≥Áßª„ÄÇ
-   Âú®**ÈùûËß¶Êë∏ËÆæÂ§á**ÔºàÂ¶ÇÊ°åÈù¢ÁîµËÑëÔºâ‰∏äÔºåÂÆÉÂ∞ÜËÆæÁΩÆ `overflow: auto` ‰ª•ÂêØÁî®ÂéüÁîüÊªöÂä®Êù°„ÄÇ

-   **`rootEl`**: Áî®‰∫éÊåÇËΩΩÈòÖËØªÂô®ÁöÑ HTML ÂÖÉÁ¥†„ÄÇ
-   **ÂÆû‰æãÂ±ûÊÄß**:
    -   `wrap_div: HTMLDivElement`: Â§ñÂ±ÇÂÆπÂô®ÂÖÉÁ¥†ÔºàËßÜÂè£Ôºâ„ÄÇ
    -   `inner_div: HTMLDivElement`: ÂÜÖÈÉ®ÂÜÖÂÆπÂÆπÂô®ÔºåÁî®‰∫éÂ≠òÊîæ PDF È°µÈù¢Ôºå‰πüÊòØÂèòÊç¢ÁöÑÁõÆÊ†á„ÄÇ

---

#### `new MobilePDF(wrapper_dom, inner_dom, config?)`

Â§ÑÁêÜ PDF Ê∏≤ÊüìÁîüÂëΩÂë®ÊúüÁöÑÊ†∏ÂøÉÁ±ª„ÄÇ

-   **`wrapper_dom`**: Â§ñÂ±ÇÂÆπÂô®ÂÖÉÁ¥† (`PDFViewer.wrap_div`)„ÄÇ
-   **`inner_dom`**: ÂÜÖÂÆπÂÆπÂô®ÂÖÉÁ¥† (`PDFViewer.inner_div`)„ÄÇ
-   **`config`**: ÂèØÈÄâÁöÑÈÖçÁΩÆÂØπË±° (`MobilePDFViewerConfig`)„ÄÇ

##### ÊñπÊ≥ï
-   **`load_pdf(source: PDFSourceDataOption): Promise<void>`**: ÂºÇÊ≠•Âä†ËΩΩ‰∏Ä‰∏™ PDF ÊñáÊ°£„ÄÇ
    -   `source`: ÂèØ‰ª•ÊòØ URL (`string`)„ÄÅ`ArrayBuffer`„ÄÅ`Uint8Array` Êàñ `pdfjs-dist` ÊîØÊåÅÁöÑÂÖ∂‰ªñÊ†ºÂºè„ÄÇ

##### ÈÖçÁΩÆ (`MobilePDFViewerConfig`)

| ÈîÆ | Á±ªÂûã | ÈªòËÆ§ÂÄº | ÊèèËø∞ |
| :--- | :--- | :--- | :--- |
| `resolution_multiplier`| `number` | `3` | ÁîªÂ∏ÉÊ∏≤ÊüìÂàÜËæ®ÁéáÁöÑÂÄçÁéá„ÄÇÊõ¥È´òÁöÑÂÄº‰ºöÂ∏¶Êù•Êõ¥Ê∏ÖÊô∞ÁöÑÂõæÂÉèÔºå‰ΩÜ‰ºöÂ¢ûÂä†ÂÜÖÂ≠ò‰ΩøÁî®Èáè„ÄÇ |
| `pdf_container_class` | `string[]` | `[]` | Ê∑ªÂä†Âà∞‰∏ªÂåÖË£ÖÂô® (`wrap_div`) ÁöÑËá™ÂÆö‰πâ CSS Á±ªÂêçÊï∞ÁªÑ„ÄÇ |
| `transform_container_class`| `string[]` | `[]` | Ê∑ªÂä†Âà∞ÂèØÂèòÊç¢ÂÜÖÂÆπÂÆπÂô® (`inner_div`) ÁöÑËá™ÂÆö‰πâ CSS Á±ªÂêçÊï∞ÁªÑ„ÄÇ |
| `page_container_class` | `string[]` | `[]` | Ê∑ªÂä†Âà∞ÊØè‰∏™Áã¨Á´ãÈ°µÈù¢ÂåÖË£ÖÂô® `div` ÁöÑËá™ÂÆö‰πâ CSS Á±ªÂêçÊï∞ÁªÑ„ÄÇ |
| `canvas_class` | `string[]` | `[]` | Ê∑ªÂä†Âà∞ÊØè‰∏™È°µÈù¢ `<canvas>` ÂÖÉÁ¥†ÁöÑËá™ÂÆö‰πâ CSS Á±ªÂêçÊï∞ÁªÑ„ÄÇ |
| `hook_actions` | `HookActions`| `{}` | ‰∏Ä‰∏™ÂåÖÂê´ÁîüÂëΩÂë®ÊúüÂõûË∞ÉÂáΩÊï∞ÁöÑÂØπË±°„ÄÇ |

##### ÁîüÂëΩÂë®ÊúüÈí©Â≠ê (`hook_actions`)

| Èí©Â≠ê | ÂèÇÊï∞ | ÊèèËø∞ |
| :--- | :--- | :--- |
| `start_loading` | `() => Promise<void>` | **ÂºÇÊ≠•**„ÄÇÂú®Ë∞ÉÁî® `load_pdf` Êó∂Ëß¶Âèë„ÄÇÈùûÂ∏∏ÈÄÇÂêàÁî®‰∫éÊòæÁ§∫Âä†ËΩΩÊåáÁ§∫Âô®„ÄÇ |
| `begin_insert_pages`| `(total_pages: number) => void`| Âú® PDF Ëß£ÊûêÂÆåÊàêÂêéËß¶Âèë„ÄÇÂª∫ËÆÆÂú®Ê≠§Â§ÑÈáçÁΩÆÂèòÊç¢Áä∂ÊÄÅ„ÄÇ |
| `complete_loading`| `(pages, pdf_doc, total) => Promise<void>` | **ÂºÇÊ≠•**„ÄÇÂú®ÊâÄÊúâÈ°µÈù¢Âç†‰ΩçÁ¨¶ÈÉΩÂ∑≤Ê∑ªÂä†Âà∞ DOM ÂêéËß¶Âèë„ÄÇ |
| `start_rendering` | `(page: PDFPage) => void` | Âú®ÁâπÂÆöÈ°µÈù¢Âç≥Â∞ÜÂºÄÂßãÊ∏≤Êüì‰πãÂâçËß¶Âèë„ÄÇ |
| `end_rendering` | `(page: PDFPage) => void` | Âú®ÁâπÂÆöÈ°µÈù¢ÂÆåÊàêÊ∏≤Êüì‰πãÂêéËß¶Âèë„ÄÇ |

---

#### `new Transform(transform_el, wrapper_el, boundary?)`

ÁÆ°ÁêÜÂÜÖÂÆπÂÖÉÁ¥†ÁöÑ 2D ÂèòÊç¢ÔºàÁº©ÊîæÂíåÂπ≥ÁßªÔºâ„ÄÇ

-   **`transform_el`**: Â∞ÜË¢´Â∫îÁî® CSS ÂèòÊç¢ÁöÑÂÖÉÁ¥† (`PDFViewer.inner_div`)„ÄÇ
-   **`wrapper_el`**: ÂÆö‰πâËæπÁïåÁöÑÂ§ñÂ±ÇÂÖÉÁ¥† (`PDFViewer.wrap_div`)„ÄÇ
-   **`boundary`**: ÂèØÈÄâÂØπË±°ÔºåÁî®‰∫éÈÖçÁΩÆÁßªÂä®ËæπÁïåÂíåÁº©ÊîæÈôêÂà∂„ÄÇ

##### Boundary (ËæπÁïå) ÈÖçÁΩÆ
`boundary` ÂØπË±°‰∏∫Âπ≥ÁßªÂíåÁº©ÊîæËÆæÁΩÆÈôêÂà∂„ÄÇ

| ÈîÆ | Á±ªÂûã | ÈªòËÆ§ÂÄº | ÊèèËø∞ |
| :--- | :--- | :--- | :--- |
| `left` | `number` | `50` | Ë∑ùÁ¶ªÂ∑¶ËæπÁºòÁöÑÊúÄÂ§ßÂèØÂπ≥ÁßªË∑ùÁ¶ªÔºàÂçï‰ΩçÔºöÂÉèÁ¥†Ôºâ„ÄÇ |
| `right` | `number` | `50` | Ë∑ùÁ¶ªÂè≥ËæπÁºòÁöÑÊúÄÂ§ßÂèØÂπ≥ÁßªË∑ùÁ¶ªÔºàÂçï‰ΩçÔºöÂÉèÁ¥†Ôºâ„ÄÇ |
| `top` | `number` | `50` | Ë∑ùÁ¶ª‰∏äËæπÁºòÁöÑÊúÄÂ§ßÂèØÂπ≥ÁßªË∑ùÁ¶ªÔºàÂçï‰ΩçÔºöÂÉèÁ¥†Ôºâ„ÄÇ |
| `bottom` | `number` | `50` | Ë∑ùÁ¶ª‰∏ãËæπÁºòÁöÑÊúÄÂ§ßÂèØÂπ≥ÁßªË∑ùÁ¶ªÔºàÂçï‰ΩçÔºöÂÉèÁ¥†Ôºâ„ÄÇ |
| `min_scale` | `number` | `0.5` | ÂÖÅËÆ∏ÁöÑÊúÄÂ∞èÁº©Â∞èÊØî‰æã„ÄÇ |
| `max_scale` | `number` | `4` | ÂÖÅËÆ∏ÁöÑÊúÄÂ§ßÊîæÂ§ßÊØî‰æã„ÄÇ |
**Ê≥®ÊÑè:** `left`„ÄÅ`right`„ÄÅ`top` Âíå `bottom` ËæπÁïåÁ∫¶Êùü‰ªÖÂú®ÂÜÖÂÆπË¢´ÊîæÂ§ßÊó∂ (`scale > 1`) ÁîüÊïà„ÄÇ

##### ÊñπÊ≥ï
-   **`set_dragging(value: boolean)`**: ËÆæÁΩÆÂÜÖÈÉ®ÁöÑÊãñÂä®Áä∂ÊÄÅ„ÄÇ
-   **`set_pinching(value: boolean)`**: ËÆæÁΩÆÂÜÖÈÉ®ÁöÑÂèåÊåáÁº©ÊîæÁä∂ÊÄÅ„ÄÇ
-   **`get_dragging(): boolean`**: Â¶ÇÊûúÊãñÂä®Êìç‰ΩúÊ≠£Âú®ËøõË°åÔºåÂàôËøîÂõû `true`„ÄÇ
-   **`get_pinching(): boolean`**: Â¶ÇÊûúÂèåÊåáÁº©ÊîæÊìç‰ΩúÊ≠£Âú®ËøõË°åÔºåÂàôËøîÂõû `true`„ÄÇ
-   **`get_translate(): { translate_x: number, translate_y: number }`**: ËøîÂõûÂΩìÂâçÁöÑÂπ≥ÁßªÂÄº„ÄÇ
-   **`get_scale(): number`**: ËøîÂõûÂΩìÂâçÁöÑÁº©ÊîæÂÄº„ÄÇ
-   **`transform(position?)`**: Â∫îÁî®‰∏Ä‰∏™ÂèòÊç¢„ÄÇ`position` ÊòØ‰∏Ä‰∏™ÂåÖÂê´ÂèØÈÄâ `translate_x`„ÄÅ`translate_y` Âíå `scale` Â±ûÊÄßÁöÑÂØπË±°„ÄÇ
-   **`reset_transform()`**: Â∞ÜÁº©ÊîæÈáçÁΩÆ‰∏∫ `1`ÔºåÂπ≥ÁßªÈáçÁΩÆ‰∏∫ `(0, 0)`„ÄÇ
-   **`constrain_boundary(x, y)`**: ËÆ°ÁÆóÂπ∂ËøîÂõûÂèóËæπÁïåÁ∫¶ÊùüÁöÑÊñ∞ÂùêÊ†á„ÄÇ

---

#### `new TouchManager(transform_instance)`

ÁõëÂê¨Áî®Êà∑ÁöÑËß¶Êë∏‰∫ã‰ª∂Âπ∂ÂçèË∞ÉÊâãÂäø„ÄÇÊûÑÈÄ†ÂáΩÊï∞‰ºöËá™Âä®Ê£ÄÊµãËß¶Êë∏ÊîØÊåÅ„ÄÇÂ¶ÇÊûúÊîØÊåÅËß¶Êë∏ÔºåÂÆÉ‰ºöË∞ÉÁî® `addEventListener()` ÂºÄÂßãÁõëÂê¨‰∫ã‰ª∂„ÄÇ

-   **`transform_instance`**: Ê≠§ÁÆ°ÁêÜÂô®Â∞ÜË¶ÅÊéßÂà∂ÁöÑ `Transform` Á±ªÁöÑÂÆû‰æã„ÄÇ

##### ÊñπÊ≥ï
-   **`addEventListener()`**: Â∞Ü `touchstart`„ÄÅ`touchmove` Âíå `touchend` ‰∫ã‰ª∂ÁõëÂê¨Âô®ÈôÑÂä†Âà∞ÂèòÊç¢ÂÖÉÁ¥†‰∏ä„ÄÇÂú®ÊîØÊåÅËß¶Êë∏ÁöÑËÆæÂ§á‰∏äÔºåÊûÑÈÄ†ÂáΩÊï∞‰ºöËá™Âä®Ë∞ÉÁî®ÂÆÉ„ÄÇ
-   **`removeEventListener()`**: ÁßªÈô§ÊâÄÊúâ‰∫ã‰ª∂ÁõëÂê¨Âô®„ÄÇ**ËøôÂØπ‰∫éÂú®ÂçïÈ°µÂ∫îÁî®‰∏≠ËøõË°åÊ∏ÖÁêÜËá≥ÂÖ≥ÈáçË¶Å**Ôºå‰ª•Èò≤Ê≠¢ÁªÑ‰ª∂Âç∏ËΩΩÊó∂ÂèëÁîüÂÜÖÂ≠òÊ≥ÑÊºè„ÄÇ

### üôè Ë¥°ÁåÆ

Ê¨¢ËøéÊèê‰∫§Ë¥°ÁåÆ„ÄÅÈóÆÈ¢òÂíåÂäüËÉΩËØ∑Ê±ÇÔºÅËØ∑ÈöèÊó∂Êü•Áúã [issues È°µÈù¢](https://github.com/zhayes/mobile_pdf/issues)„ÄÇ

### üìÑ ËÆ∏ÂèØËØÅ

Êú¨È°πÁõÆÂü∫‰∫é MIT ËÆ∏ÂèØËØÅÊéàÊùÉ„ÄÇ
